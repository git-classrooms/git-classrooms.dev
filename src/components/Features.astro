---
import type { Locale } from "../i18n";
import { useTranslations } from "../i18n";

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const t = useTranslations(locale).features;

const featureIcons = ["gitlab", "bot", "layout", "server", "users", "zap"];

const icons: Record<string, string> = {
  gitlab: `<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 01-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 014.82 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0118.6 2a.43.43 0 01.58 0 .42.42 0 01.11.18l2.44 7.51L23 13.45a.84.84 0 01-.35.94z"/>`,
  bot: `<path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/>`,
  layout: `<rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/>`,
  server: `<rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/>`,
  users: `<path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/>`,
  zap: `<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>`,
};
---

<section id="features" class="relative z-10 py-24 md:py-32">
  <div class="mx-auto max-w-6xl px-6">
    <div class="text-center mb-16">
      <h2
        class="font-mono font-bold text-3xl md:text-4xl tracking-tight animate-fade-in-up"
      >
        {t.heading}
        <span class="gradient-text">{t.headingHighlight}</span>
      </h2>
      <p
        class="mt-4 text-muted text-lg max-w-2xl mx-auto animate-fade-in-up"
        style="animation-delay: 0.1s"
      >
        {t.subline}
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        t.items.map((feature, i) => (
          <div
            class="group glass rounded-xl p-6 hover:border-primary/30 hover:shadow-[0_0_20px_hsl(185_100%_50%/0.08)] transition-all duration-300 animate-fade-in-up"
            style={`animation-delay: ${0.1 + i * 0.08}s`}
          >
            <div class="w-10 h-10 rounded-lg bg-primary/10 border border-primary/20 flex items-center justify-center mb-4 group-hover:bg-primary/15 transition-colors duration-300">
              <svg
                class="w-5 h-5 text-primary"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                set:html={icons[featureIcons[i]]}
              />
            </div>
            <h3 class="font-mono font-semibold text-base mb-2">
              {feature.title}
            </h3>
            <p class="text-sm text-muted leading-relaxed">
              {feature.description}
            </p>
          </div>
        ))
      }
    </div>
  </div>
</section>
